/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[15],{393:function(Ca,ua,r){r.r(ua);var pa=r(1),ja=r(0);r.n(ja);var ka=r(2),fa=r(132);Ca=r(48);var da=r(84),ba=r(216),w=r(61),y=r(215);r=r(316);var h=window,e=function(){function n(f,x,z){var ha=-1===f.indexOf("?")?"?":"&";switch(x){case w.a.NEVER_CACHE:this.url=f+ha+"_="+Object(ja.uniqueId)();break;default:this.url=f}this.ze=z;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);this.request.setRequestHeader("X-Requested-With",
"XMLHttpRequest");this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=y.a.NOT_STARTED}n.prototype.start=function(f,x){var z=this,ha=this,la=this.request,aa;ha.Cu=0;f&&Object.keys(f).forEach(function(ca){z.request.setRequestHeader(ca,f[ca])});x&&(this.request.withCredentials=x);this.QA=setInterval(function(){var ca=0===window.document.URL.indexOf("file:///");ca=200===la.status||
ca&&0===la.status;if(la.readyState!==y.b.DONE||ca){try{la.responseText}catch(ia){return}ha.Cu<la.responseText.length&&(aa=ha.B$())&&ha.trigger(n.Events.DATA,[aa]);0===la.readyState&&(clearInterval(ha.QA),ha.trigger(n.Events.DONE))}else clearInterval(ha.QA),ha.trigger(n.Events.DONE,["Error received return status "+la.status])},1E3);this.request.send(null);this.status=y.a.STARTED};n.prototype.B$=function(){var f=this.request,x=f.responseText;if(0!==x.length)if(this.Cu===x.length)clearInterval(this.QA),
this.trigger(n.Events.DONE);else return x=Math.min(this.Cu+3E6,x.length),f=h.yO(f,this.Cu,!0,x),this.Cu=x,f};n.prototype.abort=function(){clearInterval(this.QA);var f=this;this.request.onreadystatechange=function(){Object(ka.j)("StreamingRequest aborted");f.status=y.a.ABORTED;return f.trigger(n.Events.ABORTED)};this.request.abort()};n.prototype.finish=function(){var f=this;this.request.onreadystatechange=function(){f.status=y.a.SUCCESS;return f.trigger(n.Events.DONE)};this.request.abort()};n.Events=
{DONE:"done",DATA:"data",ABORTED:"aborted"};return n}();Object(Ca.a)(e);var a;(function(n){n[n.LOCAL_HEADER=0]="LOCAL_HEADER";n[n.FILE=1]="FILE";n[n.CENTRAL_DIR=2]="CENTRAL_DIR"})(a||(a={}));var b=function(n){function f(){var x=n.call(this)||this;x.buffer="";x.state=a.LOCAL_HEADER;x.jI=4;x.wk=null;x.br=fa.c;x.Nl={};return x}Object(pa.c)(f,n);f.prototype.v$=function(x){var z;for(x=this.buffer+x;x.length>=this.br;)switch(this.state){case a.LOCAL_HEADER:this.wk=z=this.F$(x.slice(0,this.br));if(z.Gr!==
fa.g)throw Error("Wrong signature in local header: "+z.Gr);x=x.slice(this.br);this.state=a.FILE;this.br=z.FD+z.uo+z.It+this.jI;this.trigger(f.Events.HEADER,[z]);break;case a.FILE:this.wk.name=x.slice(0,this.wk.uo);this.Nl[this.wk.name]=this.wk;z=this.br-this.jI;var ha=x.slice(this.wk.uo+this.wk.It,z);this.trigger(f.Events.FILE,[this.wk.name,ha,this.wk.UD]);x=x.slice(z);if(x.slice(0,this.jI)===fa.h)this.state=a.LOCAL_HEADER,this.br=fa.c;else return this.state=a.CENTRAL_DIR,!0}this.buffer=x;return!1};
f.Events={HEADER:"header",FILE:"file"};return f}(ba.a);Object(Ca.a)(b);Ca=function(n){function f(x,z,ha,la,aa){ha=n.call(this,x,ha,la)||this;ha.url=x;ha.stream=new e(x,z);ha.qd=new b;ha.nR=window.createPromiseCapability();ha.OR={};ha.ze=aa;return ha}Object(pa.c)(f,n);f.prototype.sv=function(x){var z=this;this.request([this.ni,this.wj,this.li]);this.stream.addEventListener(e.Events.DATA,function(ha){try{if(z.qd.v$(ha))return z.stream.finish()}catch(la){throw z.stream.abort(),z.Ft(la),x(la),la;}});
this.stream.addEventListener(e.Events.DONE,function(ha){z.c$=!0;z.nR.resolve();ha&&(z.Ft(ha),x(ha))});this.qd.addEventListener(b.Events.HEADER,Object(ja.bind)(this.NR,this));this.qd.addEventListener(b.Events.FILE,Object(ja.bind)(this.V$,this));return this.stream.start(this.ze,this.withCredentials)};f.prototype.wO=function(x){var z=this;this.nR.promise.then(function(){x(Object.keys(z.qd.Nl))})};f.prototype.vm=function(){return!0};f.prototype.request=function(x){var z=this;this.c$&&x.forEach(function(ha){z.OR[ha]||
z.Jda(ha)})};f.prototype.NR=function(){};f.prototype.abort=function(){this.stream&&this.stream.abort()};f.prototype.Jda=function(x){this.trigger(da.a.Events.PART_READY,[{Ta:x,error:"Requested part not found",yh:!1,qf:!1}])};f.prototype.V$=function(x,z,ha){this.OR[x]=!0;this.trigger(da.a.Events.PART_READY,[{Ta:x,data:z,yh:!1,qf:!1,error:null,Bc:ha}])};return f}(da.a);Object(r.a)(Ca);Object(r.b)(Ca);ua["default"]=Ca}}]);}).call(this || window)
