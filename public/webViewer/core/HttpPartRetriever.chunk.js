/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{384:function(Ca,ua,r){r.r(ua);r.d(ua,"ByteRangeRequest",function(){return x});var pa=r(1),ja=r(0);r.n(ja);var ka=r(2),fa=r(132);Ca=r(84);var da=r(216),ba=r(65),w=r(61),y=r(215),h=r(142);r=r(316);var e=[],a=[],b=window,n=function(){return function(){this.Ik=1}}(),f;(function(ha){ha[ha.UNSENT=0]="UNSENT";ha[ha.DONE=4]="DONE"})(f||(f={}));var x=function(){function ha(la,aa,ca,ia){var ea=this;this.url=la;this.range=aa;this.ze=ca;
this.withCredentials=ia;this.lX=f;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);b.Uint8Array&&(this.request.responseType="arraybuffer");ia&&(this.request.withCredentials=ia);z.DISABLE_RANGE_HEADER||(Object(ja.isUndefined)(aa.stop)?this.request.setRequestHeader("Range","bytes="+aa.start):this.request.setRequestHeader("Range",["bytes=",aa.start,"-",aa.stop-1].join("")));ca&&Object.keys(ca).forEach(function(ma){ea.request.setRequestHeader(ma,ca[ma])});this.request.overrideMimeType?
this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=y.a.NOT_STARTED}ha.prototype.start=function(la){var aa=this,ca=this.request;ca.onreadystatechange=function(){if(aa.aborted)return aa.status=y.a.ABORTED,la({code:y.a.ABORTED});if(this.readyState===aa.lX.DONE){aa.sz();var ia=0===window.document.URL.indexOf("file:///");200===ca.status||206===ca.status||ia&&0===ca.status?(ia=b.yO(this),aa.oI(ia,la)):(aa.status=
y.a.ERROR,la({code:aa.status,status:aa.status}))}};this.request.send(null);this.status=y.a.STARTED};ha.prototype.oI=function(la,aa){this.status=y.a.SUCCESS;if(aa)return aa(!1,la)};ha.prototype.abort=function(){this.sz();this.aborted=!0;this.request.abort()};ha.prototype.sz=function(){var la=Object(h.c)(this.url,this.range,a);-1!==la&&a.splice(la,1);if(0<e.length){la=e.shift();var aa=new ha(la.url,la.range,this.ze,this.withCredentials);la.request=aa;a.push(la);aa.start(Object(h.d)(la))}};ha.prototype.extend=
function(la){var aa=Object.assign({},this,la.prototype);aa.constructor=la;return aa};return ha}(),z=function(ha){function la(aa,ca,ia,ea,ma){ia=ha.call(this,aa,ia,ea)||this;ia.Lk={};ia.ay=ca;ia.url=aa;ia.DISABLE_RANGE_HEADER=!1;ia.mv=x;ia.jJ=3;ia.ze=ma||{};return ia}Object(pa.c)(la,ha);la.prototype.st=function(aa,ca,ia){var ea=-1===aa.indexOf("?")?"?":"&";switch(ia){case !1:case w.a.NEVER_CACHE:aa=aa+ea+"_="+Object(ja.uniqueId)();break;case !0:case w.a.CACHE:aa=aa+ea+"_="+ca.start+","+(Object(ja.isUndefined)(ca.stop)?
"":ca.stop)}return aa};la.prototype.BM=function(aa,ca,ia,ea){void 0===ia&&(ia={});return new this.mv(aa,ca,ia,ea)};la.prototype.V2=function(aa,ca,ia,ea,ma){for(var na=0;na<e.length;na++)if(Object(ja.isEqual)(e[na].range,ca)&&Object(ja.isEqual)(e[na].url,aa))return e[na].Wf.push(ea),e[na].rA++,null;for(na=0;na<a.length;na++)if(Object(ja.isEqual)(a[na].range,ca)&&Object(ja.isEqual)(a[na].url,aa))return a[na].Wf.push(ea),a[na].rA++,null;ia={url:aa,range:ca,ay:ia,Wf:[ea],rA:1};if(0===e.length&&a.length<
this.jJ)return a.push(ia),ia.request=this.BM(aa,ca,ma,this.withCredentials),ia;e.push(ia);return null};la.prototype.lm=function(aa,ca,ia){var ea=this.st(aa,ca,this.ay);(aa=this.V2(ea,ca,this.ay,ia,this.ze))&&aa.request.start(Object(h.d)(aa));return function(){var ma=Object(h.c)(ea,ca,a);if(-1!==ma){var na=--a[ma].rA;0===na&&a[ma].request&&a[ma].request.abort()}else ma=Object(h.c)(ea,ca,e),-1!==ma&&(na=--e[ma].rA,0===na&&e.splice(ma,1))}};la.prototype.fO=function(){return{start:-fa.a}};la.prototype.u6=
function(){var aa=-(fa.a+fa.e);return{start:aa-fa.d,end:aa}};la.prototype.Yq=function(aa){var ca=this;this.jy=!0;var ia=fa.a;this.lm(this.url,this.fO(),function(ea,ma,na){function qa(){var ra=ca.qd.aO();ca.lm(ca.url,ra,function(sa,va){if(sa)return Object(ka.j)("Error loading central directory: "+sa),aa(sa);va=Object(ba.a)(va);if(va.length!==ra.stop-ra.start)return aa("Invalid XOD file: Zip central directory data is wrong size! Should be "+(ra.stop-ra.start)+" but is "+va.length);ca.qd.ER(va);ca.OD=
!0;ca.jy=!1;return aa(!1)})}if(ea)return Object(ka.j)("Error loading end header: "+ea),aa(ea,ma,na);ma=Object(ba.a)(ma);if(ma.length!==ia)return aa("Invalid XOD file: Zip end header data is wrong size!");try{ca.qd=new da.a(ma)}catch(ra){return aa(ra)}ca.qd.W7?ca.lm(ca.url,ca.u6(),function(ra,sa){if(ra)return Object(ka.j)("Error loading zip64 header: "+ra),aa(ra);sa=Object(ba.a)(sa);ca.qd.n8(sa);qa()}):qa()})};la.prototype.wO=function(aa){aa(Object.keys(this.qd.Nl))};la.prototype.eH=function(aa,ca){var ia=
this;if(this.qd.uM(aa)){var ea=this.qd.lz(aa);if(ea in this.Lk){var ma=this.Xg[aa];ma.Mp=this.Lk[ea];ma.Mp.Ik++;ma.cancel=ma.Mp.cancel}else{var na=this.qd.K4(aa),qa=this.lm(this.url,na,function(sa,va){sa?(Object(ka.j)('Error loading part "'+aa+'": '+sa),ia.lm(ia.url,na,function(ta,Ea){if(ta)return ca(ta,aa);ia.IR(Ea,na,ea,aa,ca)})):ia.IR(va,na,ea,aa,ca)}),ra=this.Xg[aa];ra&&(ra.RT=!0,ra.cancel=function(){ra.Mp.Ik--;0===ra.Mp.Ik&&(qa(),delete ia.Lk[ea])},this.Lk[ea]=new n(ea),ra.Mp=this.Lk[ea],ra.Mp.cancel=
ra.cancel)}}else delete this.Xg[aa],ca(Error('File not found: "'+aa+'"'),aa)};la.prototype.IR=function(aa,ca,ia,ea,ma){if(aa.length!==ca.stop-ca.start)ma(Error("Part data is wrong size!"),ea);else{do{if(!this.Lk[ia])return;ea=this.Lk[ia].Ik;for(var na=ca.Go.length,qa=0;qa<na;++qa){var ra=ca.Go[qa];ma(!1,ra.Co,aa["string"===typeof aa?"substring":"subarray"](ra.start,ra.stop),this.qd.sP(ra.Co));ra.Co in this.Xg&&delete this.Xg[ra.Co]}}while(ea!==this.Lk[ia].Ik);delete this.Lk[ia]}};la.DISABLE_RANGE_HEADER=
!1;la.jJ=3;return la}(Ca.a);(function(ha){function la(aa,ca,ia){var ea=ha.call(this)||this,ma;for(ma in aa)ea[ma]=aa[ma];ea.xja=aa;ea.startOffset=ca;ea.endOffset=ia;ea.BM=function(na,qa,ra,sa){Object(ja.isUndefined)(qa.stop)?(qa.start+=ea.endOffset,qa.stop=ea.endOffset):(qa.start+=ea.startOffset,qa.stop+=ea.startOffset);na=ea.st(ea.url,qa,ea.ay);return new aa.mv(na,qa,ra,sa)};return ea}Object(pa.c)(la,ha);return la})(z);Object(r.a)(z);Object(r.b)(z);ua["default"]=z}}]);}).call(this || window)
